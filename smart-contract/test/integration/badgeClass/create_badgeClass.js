const uuid = require("uuid/v4");

module.exports = async function (badger, options) {

    const txnId = uuid();

    /*
        "type": "BadgeClass",
        "name": "Member - Fellowship of the Order of Dragons",
        "description": "This badge is awarded to all members accepted to the Fellowship of the Order of Dragons.",
        "image": "https://api.dragondevices.com/image/a66da451-20a2-43bb-bcea-bab2790027e4.png",
        "criteria": {                
            "narrative": "To earn the **Fellowship Member Badge**, one must: \n\n 1. Be invited to the Fellowship of the Order of Dragons by a current member \n\n 2. Be accepted by the membership majority, and \n\n 3. Complete the requirements to become a member."
        }
    */
    
    const result = await badger.createBadgeClass(
        txnId,     
        {
          "badgeClass": {
            "issuerEntityId": options.issuerEntityId,
            "name": "Test Badge",
            "description": "A badge of badgery.",            
            "imageObject": {
              "extension": "svg",
              "contentType": "image/svg+xml",
              "data": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzcwLjA0IDM3MC4wNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzcwLjA0IDM3MC4wNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9IkxheWVyXzVfMjFfIj4NCgkJPGc+DQoJCQk8cGF0aCBkPSJNMzQxLjY2OCwzMTQuNDEyYzAsMC00MS4wNzEtNzAuNTg4LTQ4LjQzOC04My4yNDhjOC4zODItMi41NTcsMTcuMzExLTQuODE1LDIxLjAyMS0xMS4yMjENCgkJCQljNi4xODMtMTAuNjc0LTQuODIzLTI4LjE4NC0xLjkzMy0zOS42MjVjMi45NzctMTEuNzc1LDIwLjU1MS0yMS45NjQsMjAuNTUxLTMzLjkzM2MwLTExLjY2MS0xOC4xNjktMjUuMjg0LTIxLjE0OC0zNi45OQ0KCQkJCWMtMi45MS0xMS40MzksOC4wNjMtMjguOTY4LDEuODYtMzkuNjI5Yy02LjIwMy0xMC42NjItMjYuODY0LTkuNzg2LTM1LjM2OS0xNy45N2MtOC43NTEtOC40MjItOC43MjQtMjkuMDI4LTE5LjI3OS0zNC42NzINCgkJCQljLTEwLjU5OC01LjY2NS0yNy44MjIsNS43ODQtMzkuNTg5LDMuMDcyQzIwNy43MTEsMTcuNTE1LDE5Ny4zMTgsMCwxODUuMTY3LDBjLTEyLjMzMSwwLTMxLjk0NCwxOS44NjgtMzUuMDIsMjAuNTgzDQoJCQkJYy0xMS43NjEsMi43MzQtMjkuMDA3LTguNjg3LTM5LjU5NC0yLjk5OGMtMTAuNTQ1LDUuNjYzLTEwLjQ4LDI2LjI3MS0xOS4yMTUsMzQuNzA3Yy04LjQ5MSw4LjE5OS0yOS4xNTMsNy4zNjEtMzUuMzM3LDE4LjAzNQ0KCQkJCWMtNi4xODMsMTAuNjcyLDQuODIzLDI4LjE3OCwxLjkzNCwzOS42MjVjLTIuODk3LDExLjQ3Ni0yMS4wODMsMjMuMTA0LTIxLjA4MywzNi4zNzZjMCwxMS45NywxNy42MTgsMjIuMTI3LDIwLjYxMywzMy44OTYNCgkJCQljMi45MTEsMTEuNDM5LTguMDYyLDI4Ljk2Ni0xLjg1OSwzOS42MzFjMy4zNzcsNS44MDUsMTEuMDM5LDguMTg4LDE4LjY5MSwxMC40NzljMC44OTMsMC4yNjcsMi41ODIsMS4yNjYsMS40MzgsMi45MzMNCgkJCQljLTUuMjM1LDkuMDM2LTQ3LjM3LDgxLjc1NS00Ny4zNyw4MS43NTVjLTMuMzUyLDUuNzg0LTAuNjMsMTAuNzQyLDYuMDQ3LDExLjAyM2wzMi42ODMsMS4zNjMNCgkJCQljNi42NzcsMC4yODEsMTUuMDUzLDUuMTMzLDE4LjYxNywxMC43ODZsMTcuNDQsMjcuNjc0YzMuNTY0LDUuNjUzLDkuMjE5LDUuNTQ3LDEyLjU3LTAuMjM2YzAsMCw0OC43OTctODQuMjQ2LDQ4LjgxNy04NC4yNw0KCQkJCWMwLjk3OS0xLjE0NCwxLjk2My0wLjkwOSwyLjQzNC0wLjUwOWM1LjMzOSw0LjU0NiwxMi43ODIsOS4wODEsMTguOTk0LDkuMDgxYzYuMDkyLDAsMTEuNzMzLTQuMjY5LDE3LjMxMy05LjAzDQoJCQkJYzAuNDU0LTAuMzg3LDEuNTU5LTEuMTgsMi4zNjcsMC40NjZjMC4wMTMsMC4wMjYsNDguNzU2LDgzLjgxMSw0OC43NTYsODMuODExYzMuMzYsNS43NzYsOS4wMTYsNS44NzQsMTIuNTY5LDAuMjE0DQoJCQkJbDE3LjM5MS0yNy43MDdjMy41NTQtNS42NTcsMTEuOTIxLTEwLjUyOCwxOC41OTgtMTAuODE5bDMyLjY4LTEuNDI0QzM0Mi4zMTUsMzI1LjE1MiwzNDUuMDI4LDMyMC4xODcsMzQxLjY2OCwzMTQuNDEyeg0KCQkJCSBNMjM5LjE4LDIzOC42MzFjLTM2LjEzNiwyMS4wMjMtNzkuNTExLDE4Ljc3LTExMi42NDEtMi4xMjdjLTQ4LjU0NS0zMS4wOTUtNjQuNTE4LTk1LjQxOS0zNS4zMzUtMTQ1Ljc4OA0KCQkJCWMyOS41MTYtNTAuOTUsOTQuMzk5LTY4LjkyOCwxNDUuODA4LTQwLjkyOWMwLjI3LDAuMTQ3LDAuNTM3LDAuMjk5LDAuODA1LDAuNDQ5YzAuMzgxLDAuMjExLDAuNzYxLDAuNDI1LDEuMTQsMC42NDENCgkJCQljMTUuODYsOS4xNDQsMjkuNjEzLDIyLjQxNSwzOS40NjEsMzkuMzQyQzMwOC41MTYsMTQxLjk1NSwyOTAuOTE1LDIwOC41MzMsMjM5LjE4LDIzOC42MzF6Ii8+DQoJCQk8cGF0aCBkPSJNMjMwLjkxNiw2Ni4xMDNjLTAuMTUtMC4wODctMC4zMDItMC4xNjgtMC40NTItMC4yNTRDMjAzLjAwMiw0OS45NTUsMTY4LDQ4Ljc5MywxMzguNjY1LDY1Ljg2DQoJCQkJYy00My41MzIsMjUuMzI2LTU4LjM0NSw4MS4zNDUtMzMuMDE5LDEyNC44NzZjNy43MjgsMTMuMjg0LDE4LjMxOCwyMy44ODgsMzAuNTM2LDMxLjQ5OGMxLjAzOSwwLjY1OCwyLjA5LDEuMzA1LDMuMTY0LDEuOTI3DQoJCQkJYzQzLjU3OSwyNS4yNDcsOTkuNTY4LDEwLjMzMywxMjQuODE0LTMzLjI0NEMyODkuNDA1LDE0Ny4zMzgsMjc0LjQ5NSw5MS4zNSwyMzAuOTE2LDY2LjEwM3ogTTI0MS44MTgsMTM3LjM0NGwtMTUuMjU5LDE0Ljg3Mw0KCQkJCWMtNC43MjYsNC42MDYtNy42OCwxMy42OTgtNi41NjMsMjAuMjAzbDMuNjAyLDIxLjAwMWMxLjExNiw2LjUwNS0yLjc1LDkuMzE0LTguNTkyLDYuMjQzbC0xOC44NjEtOS45MTYNCgkJCQljLTUuODQyLTMuMDcxLTE1LjQwMS0zLjA3MS0yMS4yNDMsMGwtMTguODYsOS45MTZjLTUuODQyLDMuMDcxLTkuNzA5LDAuMjYyLTguNTkzLTYuMjQzbDMuNjAyLTIxLjAwMQ0KCQkJCWMxLjExNi02LjUwNS0xLjgzOC0xNS41OTctNi41NjQtMjAuMjAzbC0xNS4yNTgtMTQuODczYy00LjcyNy00LjYwNi0zLjI0OS05LjE1MiwzLjI4Mi0xMC4xMDJsMjEuMDg2LTMuMDY0DQoJCQkJYzYuNTMxLTAuOTQ5LDE0LjI2NS02LjU2OCwxNy4xODYtMTIuNDg2bDkuNDMtMTkuMTA3YzIuOTIxLTUuOTE4LDcuNzAxLTUuOTE4LDEwLjYyMSwwbDkuNDMxLDE5LjEwNw0KCQkJCWMyLjkyMSw1LjkxOCwxMC42NTQsMTEuNTM3LDE3LjE4NiwxMi40ODZsMjEuMDg2LDMuMDY0QzI0NS4wNjcsMTI4LjE5MiwyNDYuNTQ0LDEzMi43MzgsMjQxLjgxOCwxMzcuMzQ0eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo="              
            },
            "criteria": {
              "narrative": "The means by which a badgery badge is obtained is as follows..."
            }
          }
        }
    );

    badger.client.updateSmartContractHeap(result);

    const entityKey = `badgeClass-${txnId}`;
    
    const imageKey = `image-${txnId}`;

    const imageObject = {
      "extension": "svg",
      "contentType": "image/svg+xml",
      "data": "PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE4LjEuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzcwLjA0IDM3MC4wNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzcwLjA0IDM3MC4wNDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9IkxheWVyXzVfMjFfIj4NCgkJPGc+DQoJCQk8cGF0aCBkPSJNMzQxLjY2OCwzMTQuNDEyYzAsMC00MS4wNzEtNzAuNTg4LTQ4LjQzOC04My4yNDhjOC4zODItMi41NTcsMTcuMzExLTQuODE1LDIxLjAyMS0xMS4yMjENCgkJCQljNi4xODMtMTAuNjc0LTQuODIzLTI4LjE4NC0xLjkzMy0zOS42MjVjMi45NzctMTEuNzc1LDIwLjU1MS0yMS45NjQsMjAuNTUxLTMzLjkzM2MwLTExLjY2MS0xOC4xNjktMjUuMjg0LTIxLjE0OC0zNi45OQ0KCQkJCWMtMi45MS0xMS40MzksOC4wNjMtMjguOTY4LDEuODYtMzkuNjI5Yy02LjIwMy0xMC42NjItMjYuODY0LTkuNzg2LTM1LjM2OS0xNy45N2MtOC43NTEtOC40MjItOC43MjQtMjkuMDI4LTE5LjI3OS0zNC42NzINCgkJCQljLTEwLjU5OC01LjY2NS0yNy44MjIsNS43ODQtMzkuNTg5LDMuMDcyQzIwNy43MTEsMTcuNTE1LDE5Ny4zMTgsMCwxODUuMTY3LDBjLTEyLjMzMSwwLTMxLjk0NCwxOS44NjgtMzUuMDIsMjAuNTgzDQoJCQkJYy0xMS43NjEsMi43MzQtMjkuMDA3LTguNjg3LTM5LjU5NC0yLjk5OGMtMTAuNTQ1LDUuNjYzLTEwLjQ4LDI2LjI3MS0xOS4yMTUsMzQuNzA3Yy04LjQ5MSw4LjE5OS0yOS4xNTMsNy4zNjEtMzUuMzM3LDE4LjAzNQ0KCQkJCWMtNi4xODMsMTAuNjcyLDQuODIzLDI4LjE3OCwxLjkzNCwzOS42MjVjLTIuODk3LDExLjQ3Ni0yMS4wODMsMjMuMTA0LTIxLjA4MywzNi4zNzZjMCwxMS45NywxNy42MTgsMjIuMTI3LDIwLjYxMywzMy44OTYNCgkJCQljMi45MTEsMTEuNDM5LTguMDYyLDI4Ljk2Ni0xLjg1OSwzOS42MzFjMy4zNzcsNS44MDUsMTEuMDM5LDguMTg4LDE4LjY5MSwxMC40NzljMC44OTMsMC4yNjcsMi41ODIsMS4yNjYsMS40MzgsMi45MzMNCgkJCQljLTUuMjM1LDkuMDM2LTQ3LjM3LDgxLjc1NS00Ny4zNyw4MS43NTVjLTMuMzUyLDUuNzg0LTAuNjMsMTAuNzQyLDYuMDQ3LDExLjAyM2wzMi42ODMsMS4zNjMNCgkJCQljNi42NzcsMC4yODEsMTUuMDUzLDUuMTMzLDE4LjYxNywxMC43ODZsMTcuNDQsMjcuNjc0YzMuNTY0LDUuNjUzLDkuMjE5LDUuNTQ3LDEyLjU3LTAuMjM2YzAsMCw0OC43OTctODQuMjQ2LDQ4LjgxNy04NC4yNw0KCQkJCWMwLjk3OS0xLjE0NCwxLjk2My0wLjkwOSwyLjQzNC0wLjUwOWM1LjMzOSw0LjU0NiwxMi43ODIsOS4wODEsMTguOTk0LDkuMDgxYzYuMDkyLDAsMTEuNzMzLTQuMjY5LDE3LjMxMy05LjAzDQoJCQkJYzAuNDU0LTAuMzg3LDEuNTU5LTEuMTgsMi4zNjcsMC40NjZjMC4wMTMsMC4wMjYsNDguNzU2LDgzLjgxMSw0OC43NTYsODMuODExYzMuMzYsNS43NzYsOS4wMTYsNS44NzQsMTIuNTY5LDAuMjE0DQoJCQkJbDE3LjM5MS0yNy43MDdjMy41NTQtNS42NTcsMTEuOTIxLTEwLjUyOCwxOC41OTgtMTAuODE5bDMyLjY4LTEuNDI0QzM0Mi4zMTUsMzI1LjE1MiwzNDUuMDI4LDMyMC4xODcsMzQxLjY2OCwzMTQuNDEyeg0KCQkJCSBNMjM5LjE4LDIzOC42MzFjLTM2LjEzNiwyMS4wMjMtNzkuNTExLDE4Ljc3LTExMi42NDEtMi4xMjdjLTQ4LjU0NS0zMS4wOTUtNjQuNTE4LTk1LjQxOS0zNS4zMzUtMTQ1Ljc4OA0KCQkJCWMyOS41MTYtNTAuOTUsOTQuMzk5LTY4LjkyOCwxNDUuODA4LTQwLjkyOWMwLjI3LDAuMTQ3LDAuNTM3LDAuMjk5LDAuODA1LDAuNDQ5YzAuMzgxLDAuMjExLDAuNzYxLDAuNDI1LDEuMTQsMC42NDENCgkJCQljMTUuODYsOS4xNDQsMjkuNjEzLDIyLjQxNSwzOS40NjEsMzkuMzQyQzMwOC41MTYsMTQxLjk1NSwyOTAuOTE1LDIwOC41MzMsMjM5LjE4LDIzOC42MzF6Ii8+DQoJCQk8cGF0aCBkPSJNMjMwLjkxNiw2Ni4xMDNjLTAuMTUtMC4wODctMC4zMDItMC4xNjgtMC40NTItMC4yNTRDMjAzLjAwMiw0OS45NTUsMTY4LDQ4Ljc5MywxMzguNjY1LDY1Ljg2DQoJCQkJYy00My41MzIsMjUuMzI2LTU4LjM0NSw4MS4zNDUtMzMuMDE5LDEyNC44NzZjNy43MjgsMTMuMjg0LDE4LjMxOCwyMy44ODgsMzAuNTM2LDMxLjQ5OGMxLjAzOSwwLjY1OCwyLjA5LDEuMzA1LDMuMTY0LDEuOTI3DQoJCQkJYzQzLjU3OSwyNS4yNDcsOTkuNTY4LDEwLjMzMywxMjQuODE0LTMzLjI0NEMyODkuNDA1LDE0Ny4zMzgsMjc0LjQ5NSw5MS4zNSwyMzAuOTE2LDY2LjEwM3ogTTI0MS44MTgsMTM3LjM0NGwtMTUuMjU5LDE0Ljg3Mw0KCQkJCWMtNC43MjYsNC42MDYtNy42OCwxMy42OTgtNi41NjMsMjAuMjAzbDMuNjAyLDIxLjAwMWMxLjExNiw2LjUwNS0yLjc1LDkuMzE0LTguNTkyLDYuMjQzbC0xOC44NjEtOS45MTYNCgkJCQljLTUuODQyLTMuMDcxLTE1LjQwMS0zLjA3MS0yMS4yNDMsMGwtMTguODYsOS45MTZjLTUuODQyLDMuMDcxLTkuNzA5LDAuMjYyLTguNTkzLTYuMjQzbDMuNjAyLTIxLjAwMQ0KCQkJCWMxLjExNi02LjUwNS0xLjgzOC0xNS41OTctNi41NjQtMjAuMjAzbC0xNS4yNTgtMTQuODczYy00LjcyNy00LjYwNi0zLjI0OS05LjE1MiwzLjI4Mi0xMC4xMDJsMjEuMDg2LTMuMDY0DQoJCQkJYzYuNTMxLTAuOTQ5LDE0LjI2NS02LjU2OCwxNy4xODYtMTIuNDg2bDkuNDMtMTkuMTA3YzIuOTIxLTUuOTE4LDcuNzAxLTUuOTE4LDEwLjYyMSwwbDkuNDMxLDE5LjEwNw0KCQkJCWMyLjkyMSw1LjkxOCwxMC42NTQsMTEuNTM3LDE3LjE4NiwxMi40ODZsMjEuMDg2LDMuMDY0QzI0NS4wNjcsMTI4LjE5MiwyNDYuNTQ0LDEzMi43MzgsMjQxLjgxOCwxMzcuMzQ0eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPC9zdmc+DQo="              
    };

    return {
        "requestTxnId": txnId,        
        "actual": result,        
        "expected": {
            "response": {
              "type": "createBadgeClass",
              "entity": {
                "issuerEntityId": options.issuerEntityId,
                "entityId": txnId,
                "type": "BadgeClass",
                "name": "Test Badge",
                "description": "A badge of badgery.",                       
                "criteria": {
                  "narrative": "The means by which a badgery badge is obtained is as follows..."
                }
              }
            },
            [entityKey]: {
              "entityId": txnId,
              "type": "BadgeClass",              
              "issuerEntityId": options.issuerEntityId,
              "name": "Test Badge",
              "description": "A badge of badgery.",                       
              "criteria": {
                "narrative": "The means by which a badgery badge is obtained is as follows..."
              }
            },
            [imageKey]: imageObject
        }
    };    
}